<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Profile - Mirza</title>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="/stylesheets/profile.css" />
  </head>
  <body>
    <header class="header">
      <div class="header__content">
        <h1 class="header__greeting">Hello, MirzaðŸ‘‹</h1>
        <nav class="header__nav" aria-label="Main navigation">
          <a href="#" class="nav__link">Profile</a>
          <a href="#" class="nav__link">Logout</a>
        </nav>
      </div>
    </header>

    <main class="main">
      <section class="composer">

        <div class="profile-photo">
          <img src="/images/uploads/<%= user.profilepic%>" alt="dp">;
        </div>

        <div class="composer__card">
          <h2 class="composer__title">Create a new post</h2>
          <form class="composer__form" method="post" action="/post">
            <div class="field">
              <label for="post-content" class="field__label">What's on your mind?</label>
              <textarea 
                id="post-content" 
                name="content" 
                class="field__textarea" 
                rows="4" 
                placeholder="Share your thoughts..."
                required
              ></textarea>
            </div>
            <button type="submit" class="button button--primary">Create New Post</button>
          </form>
        </div>
      </section>

      <section class="feed">
        <h2 class="feed__title">Recent Posts</h2>
        
        <% user.post.reverse().forEach(function (post){ %>
            <article class="post post--own">
          <div class="post__badge">Your post</div>
          <header class="post__header">
            <span class="post__handle">@<%= user.username %></span>
            <time class="post__time" datetime="2024-01-15"><%= post.datetime %></time>
          </header>
          <div class="post__content">
            <p> <%= post.content %> </p>
          </div>
          <footer class="post__actions">
            <form action="/like/<%= post._id %>" method="POST">
            <button class="action-btn action-btn--like" type="submit">
                
              <span class="action-btn__icon"><%= post.likes.indexOf(user._id) ? "like" : "unlike" %>  â™¡ </span>
              <span class="action-btn__text"><%= post.likes.length %></span>
            </button>
            </form>
            <form action="/edit/<%= post._id %>" method="POST">
            <button class="action-btn action-btn--edit" type="submit">
              <span class="action-btn__icon">âœŽ</span>
              <span class="action-btn__text">Edit</span>
            </button>
            </form>
          </footer>
        </article>
        <% }) %>

        <article class="post">
          <header class="post__header">
            <span class="post__handle">@jdoe</span>
            <time class="post__time" datetime="2024-01-15">4 hours ago</time>
          </header>
          <div class="post__content">
            <p>Working on some exciting new features for our platform. Can't wait to share what we've been building behind the scenes. The team has been absolutely crushing it lately!</p>
          </div>
          <footer class="post__actions">
            <button class="action-btn action-btn--like" type="button">
              <span class="action-btn__icon">â™¡</span>
              <span class="action-btn__text">Like</span>
            </button>
            <button class="action-btn action-btn--edit" type="button" disabled>
              <span class="action-btn__icon">âœŽ</span>
              <span class="action-btn__text">Edit</span>
            </button>
          </footer>
        </article>

        <article class="post">
          <header class="post__header">
            <span class="post__handle">@satoshi</span>
            <time class="post__time" datetime="2024-01-14">1 day ago</time>
          </header>
          <div class="post__content">
            <p>The future of decentralized systems is looking brighter than ever. We're seeing incredible innovation in user interfaces and developer experience. It's amazing how far we've come in just a few years.</p>
          </div>
          <footer class="post__actions">
            <button class="action-btn action-btn--like" type="button">
              <span class="action-btn__icon">â™¡</span>
              <span class="action-btn__text">Like</span>
            </button>
            <button class="action-btn action-btn--edit" type="button" disabled>
              <span class="action-btn__icon">âœŽ</span>
              <span class="action-btn__text">Edit</span>
            </button>
          </footer>
        </article>
      </section>
    </main>
  </body>
</html>
